<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Match - TV Telugu</title>

<link rel="icon" href="https://tvtelugu.github.io/images/tvtelugu.ico">

<style>
:root{
  --bg:#0b0f1a;
  --card:rgba(255,255,255,.06);
  --accent:#4facfe;
  --live:#ff0000;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:#fff;
  font-family:system-ui,Segoe UI,Roboto;
  padding:16px;
}
.header-container{text-align:center;margin-bottom:16px}
.main-logo{max-width:180px;width:50%}
.title-row{display:flex;align-items:center;justify-content:center;gap:8px}
.pulse{
  width:10px;height:10px;
  background:var(--live);
  border-radius:50%;
  animation:pulse 1.5s infinite
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(255,0,0,.7)}
  70%{box-shadow:0 0 0 10px rgba(255,0,0,0)}
  100%{box-shadow:0 0 0 0 rgba(255,0,0,0)}
}
h1{font-size:18px;margin:0}
.sub-title{text-align:center;font-size:11px;color:var(--accent);margin-bottom:16px}

.card{
  background:var(--card);
  border-radius:14px;
  padding:14px;
  margin-bottom:12px;
  border:1px solid rgba(255,255,255,.08)
}
.ch-header{display:flex;gap:10px;align-items:center}
.ch-logo{
  width:42px;height:42px;
  background:#fff;border-radius:8px;padding:3px
}
.channel{font-weight:600}
.meta{
  margin:10px 0;
  display:flex;
  gap:6px;
  flex-wrap:wrap
}
.badge{
  font-size:10px;
  padding:3px 8px;
  border-radius:50px;
  background:rgba(255,255,255,.12)
}
.buttons{display:flex;gap:6px}
button{
  flex:1;
  padding:10px;
  border:none;
  border-radius:10px;
  font-size:11px;
  font-weight:700
}
.ns{background:#ff3d71;color:#fff}
.pf{background:#00d1ff;color:#fff}
.cp{background:#fff;color:#000}

#error{
  display:none;
  text-align:center;
  margin-top:40px
}
</style>
</head>

<body>

<div class="header-container">
  <img src="https://tvtelugu.pages.dev/logo/TV%20Telugu%20Cricket.png" class="main-logo">
</div>

<div class="title-row">
  <div class="pulse"></div>
  <h1 id="eventTitle">Loading‚Ä¶</h1>
</div>
<div id="eventMeta" class="sub-title">Fetching live streams</div>

<div id="list"></div>

<div id="error">
  <h3>‚ö†Ô∏è Unable to load streams</h3>
  <button onclick="location.reload()">Retry</button>
</div>

<script>
/* injected by GitHub Actions */
const JSON_URL = "__JSON_STREAM_URL__";

/* üî• CORS-SAFE FETCH */
const PROXY = "https://api.allorigins.win/raw?url=";

fetch(PROXY + encodeURIComponent(JSON_URL + "?v=" + Date.now()))
  .then(res => {
    if (!res.ok) throw new Error("HTTP " + res.status);
    return res.json();
  })
  .then(data => render(data))
  .catch(err => {
    console.error(err);
    document.getElementById("error").style.display = "block";
    document.getElementById("eventMeta").innerText = "Connection Failed";
  });

function render(data){
  eventTitle.innerText = data.event.title;
  eventMeta.innerText = `${data.event.sport} ‚Ä¢ ${data.event.match_type}`;

  list.innerHTML = data.streams.map(s => `
    <div class="card">
      <div class="ch-header">
        <img class="ch-logo"
          src="https://ui-avatars.com/api/?name=${encodeURIComponent(s.language)}&color=fff">
        <div class="channel">${s.language}</div>
      </div>
      <div class="meta">
        <span class="badge">${s.quality}</span>
        <span class="badge">${s.format}</span>
        <span class="badge">${s.provider}</span>
      </div>
      <div class="buttons">
        <button class="ns" onclick="play('${encodeURIComponent(s.url)}','ns')">NS</button>
        <button class="pf" onclick="play('${encodeURIComponent(s.url)}','pf')">PLAY</button>
        <button class="cp" onclick="copyURL('${s.url}')">COPY</button>
      </div>
    </div>
  `).join("");
}

function play(u,t){
  const pkg = t==="ns"
    ? "com.genuine.leone"
    : "com.appnix.playify";
  location.href = `intent:${decodeURIComponent(u)}#Intent;package=${pkg};end`;
}
function copyURL(u){
  navigator.clipboard.writeText(u);
  alert("URL Copied");
}
</script>

</body>
</html>
