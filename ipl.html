<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Match - TV Telugu</title>
<link rel="icon" type="image/x-icon" href="https://tvtelugu.github.io/images/tvtelugu.ico">
<style>
:root {
  --bg: #0b0f1a;
  --card: rgba(255, 255, 255, 0.06);
  --shimmer: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0) 100%);
  --accent: #4facfe;
}
* { box-sizing: border-box; }
body {
  margin: 0;
  background: var(--bg);
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  padding: 16px;
}

/* Smart Fit Header Logo */
.header-container {
  text-align: center;
  margin-bottom: 20px;
}
.main-logo {
  max-width: 180px; /* Limits size on big screens */
  width: 50%;       /* Adjusts to screen size on mobile */
  height: auto;     /* Maintains aspect ratio */
  object-fit: contain;
}

h1 { text-align: center; font-size: 20px; margin: 10px 0 5px; font-weight: 700; }
.sub-title { text-align: center; font-size: 11px; color: var(--accent); margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px; }

/* Skeleton Loader */
.skeleton {
  background: var(--card);
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 14px;
  height: 130px;
  position: relative;
  overflow: hidden;
}
.skeleton::after {
  content: "";
  position: absolute;
  top: 0; left: 0; width: 100%; height: 100%;
  background: var(--shimmer);
  animation: shimmer 1.2s infinite;
}
@keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
.sk-line { height: 12px; background: rgba(255,255,255,0.1); border-radius: 4px; margin-bottom: 10px; }

/* Real Card Styling */
.card {
  background: var(--card);
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 14px;
  border: 1px solid rgba(255,255,255,0.1);
  display: none;
  animation: fadeIn 0.4s ease-out;
}
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.ch-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
.ch-logo { 
  width: 45px; height: 45px; 
  background: #fff; border-radius: 10px; 
  object-fit: contain; padding: 4px; 
}
.channel { font-size: 17px; font-weight: 600; flex: 1; }

.meta { font-size: 11px; color: #94a3b8; display: flex; gap: 6px; margin-bottom: 15px; }
.badge { background: rgba(255,255,255,0.1); padding: 3px 8px; border-radius: 50px; font-size: 10px; }

.buttons { display: flex; gap: 8px; }
button {
  flex: 1; padding: 12px 5px; border: none; border-radius: 10px;
  font-size: 12px; font-weight: 700; cursor: pointer; transition: 0.2s;
}
.ns { background: linear-gradient(135deg, #ff3d71, #ff0055); color: #fff; }
.pf { background: linear-gradient(135deg, #00d1ff, #0077ff); color: #fff; }
.cp { background: #fff; color: #000; }
button:active { transform: scale(0.95); }

/* Error Styling */
.error { text-align: center; color: #ff5e5e; padding: 20px; font-size: 14px; }
</style>
</head>
<body>

<div class="header-container">
  <img src="https://tvtelugu.github.io/images/tvtelugu-B.png" alt="TV Telugu Logo" class="main-logo">
</div>

<h1 id="eventTitle">Connecting...</h1>
<div id="eventMeta" class="sub-title">Fetching Live Data</div>

<div id="list">
  <div class="skeleton"><div class="sk-line" style="width:70%"></div><div class="sk-line" style="width:40%"></div><div class="sk-line" style="margin-top:25px"></div></div>
  <div class="skeleton"><div class="sk-line" style="width:70%"></div><div class="sk-line" style="width:40%"></div><div class="sk-line" style="margin-top:25px"></div></div>
</div>

<script>
// Logic to get channel/provider logos
function getLogo(provider, channel) {
    const name = (provider || channel).toLowerCase();
    if (name.includes('hotstar')) return "https://logo.clearbit.com/hotstar.com";
    if (name.includes('willow')) return "https://logo.clearbit.com/willow.tv";
    if (name.includes('tnt')) return "https://logo.clearbit.com/tntsports.co.uk";
    if (name.includes('star')) return "https://logo.clearbit.com/startv.com";
    return `https://ui-avatars.com/api/?name=${encodeURIComponent(channel)}&background=random&color=fff&bold=true`;
}

async function fastForceLoad() {
    const targetUrl = `https://pasteking.u0k.workers.dev/3qsxt.json?v=${Date.now()}`;
    const proxies = [
        `https://api.allorigins.win/get?url=${encodeURIComponent(targetUrl)}`,
        `https://corsproxy.io/?${encodeURIComponent(targetUrl)}`
    ];

    try {
        const response = await Promise.any(proxies.map(p => fetch(p)));
        const rawData = await response.json();
        const data = rawData.contents ? JSON.parse(rawData.contents) : rawData;

        document.getElementById("eventTitle").innerText = data.event.title;
        document.getElementById("eventMeta").innerText = `${data.event.sport} â€¢ ${data.event.match_type}`;
        
        const list = document.getElementById("list");
        let html = "";

        data.streams.forEach(s => {
            const logoUrl = getLogo(s.provider, s.channel);
            html += `
            <div class="card" style="display: block;">
                <div class="ch-header">
                    <img src="${logoUrl}" class="ch-logo" onerror="this.src='https://ui-avatars.com/api/?name=${s.channel}'">
                    <div class="channel">${s.channel}</div>
                </div>
                <div class="meta">
                    <span class="badge">${s.language}</span>
                    <span class="badge">${s.quality}</span>
                    <span class="badge">${s.format}</span>
                    <span class="badge" style="color:#4facfe">${s.provider}</span>
                </div>
                <div class="buttons">
                    <button class="ns" onclick="play('${s.url}', 'ns')">NS PLAYER</button>
                    <button class="pf" onclick="play('${s.url}', 'pf')">PLAYIFY</button>
                    <button class="cp" onclick="copy('${s.url}')">COPY</button>
                </div>
            </div>`;
        });
        
        list.innerHTML = html;
    } catch (err) {
        document.getElementById("list").innerHTML = `<div class="error">Failed to Load Streams. Please Refresh.</div>`;
    }
}

function play(url, type) {
    const pkg = (type === 'ns') ? 'com.genuine.leone' : 'com.appnix.playify';
    window.location.href = `intent:${url}#Intent;package=${pkg};end`;
}

function copy(url) {
    navigator.clipboard.writeText(url);
    alert("URL Copied!");
}

fastForceLoad();
</script>
</body>
</html>
